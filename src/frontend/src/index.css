@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Theater theme colors using OKLCH */
    --background: oklch(0.15 0.02 270);
    --foreground: oklch(0.98 0.01 270);
    --card: oklch(0.18 0.02 270);
    --card-foreground: oklch(0.98 0.01 270);
    --popover: oklch(0.18 0.02 270);
    --popover-foreground: oklch(0.98 0.01 270);
    --primary: oklch(0.65 0.25 270);
    --primary-foreground: oklch(0.98 0.01 270);
    --secondary: oklch(0.25 0.03 270);
    --secondary-foreground: oklch(0.98 0.01 270);
    --muted: oklch(0.22 0.02 270);
    --muted-foreground: oklch(0.65 0.02 270);
    --accent: oklch(0.55 0.22 330);
    --accent-foreground: oklch(0.98 0.01 270);
    --destructive: oklch(0.55 0.25 25);
    --destructive-foreground: oklch(0.98 0.01 270);
    --border: oklch(0.25 0.03 270);
    --input: oklch(0.25 0.03 270);
    --ring: oklch(0.65 0.25 270);
    --radius: 0.5rem;
  }

  .dark {
    --background: oklch(0.15 0.02 270);
    --foreground: oklch(0.98 0.01 270);
    --card: oklch(0.18 0.02 270);
    --card-foreground: oklch(0.98 0.01 270);
    --popover: oklch(0.18 0.02 270);
    --popover-foreground: oklch(0.98 0.01 270);
    --primary: oklch(0.65 0.25 270);
    --primary-foreground: oklch(0.98 0.01 270);
    --secondary: oklch(0.25 0.03 270);
    --secondary-foreground: oklch(0.98 0.01 270);
    --muted: oklch(0.22 0.02 270);
    --muted-foreground: oklch(0.65 0.02 270);
    --accent: oklch(0.55 0.22 330);
    --accent-foreground: oklch(0.98 0.01 270);
    --destructive: oklch(0.55 0.25 25);
    --destructive-foreground: oklch(0.98 0.01 270);
    --border: oklch(0.25 0.03 270);
    --input: oklch(0.25 0.03 270);
    --ring: oklch(0.65 0.25 270);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
  
  /* Prevent horizontal overflow */
  html, body {
    @apply overflow-x-hidden;
    max-width: 100vw;
  }
  
  /* Ensure all containers respect viewport bounds */
  #root {
    @apply min-h-screen w-full overflow-x-hidden;
  }
  
  /* Responsive typography */
  h1 {
    @apply text-2xl sm:text-3xl md:text-4xl lg:text-5xl;
  }
  
  h2 {
    @apply text-xl sm:text-2xl md:text-3xl lg:text-4xl;
  }
  
  h3 {
    @apply text-lg sm:text-xl md:text-2xl;
  }
  
  /* Word wrapping for long text */
  p, span, div {
    @apply break-words;
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
  }
  
  /* Prevent text overflow in tables */
  table {
    @apply w-full table-auto;
  }
  
  td, th {
    @apply break-words;
    max-width: 0;
  }
  
  /* Dropdown menu item text wrapping - improved */
  [role="menuitem"] {
    @apply min-w-0 flex items-center;
    white-space: normal;
    word-break: break-word;
  }
  
  [role="menuitem"] > span {
    @apply break-words;
    white-space: normal;
    overflow-wrap: break-word;
  }
  
  /* Ensure dropdown menus are scrollable and don't overflow viewport */
  [role="menu"] {
    max-height: min(80vh, 600px);
    overflow-y: auto;
    overflow-x: hidden;
  }
  
  /* Ensure sticky header doesn't overlap content */
  main {
    @apply relative z-0;
  }
  
  /* Safe spacing for content under sticky header */
  .page-content {
    @apply pt-4 sm:pt-6;
  }
}

@layer utilities {
  .gradient-text {
    @apply bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent;
  }
  
  .holographic-glow {
    box-shadow: 0 0 20px oklch(0.65 0.25 270 / 0.5),
                0 0 40px oklch(0.55 0.22 330 / 0.3);
  }
  
  .theater-glow {
    box-shadow: 0 0 30px oklch(0.65 0.25 270 / 0.4),
                0 0 60px oklch(0.55 0.22 330 / 0.2),
                inset 0 0 20px oklch(0.65 0.25 270 / 0.1);
  }
  
  /* Responsive container utilities */
  .container-safe {
    @apply w-full max-w-full px-4 sm:px-6 lg:px-8;
  }
  
  /* Prevent layout shift */
  .no-layout-shift {
    contain: layout;
  }
  
  /* Safe scrolling areas */
  .scroll-safe {
    @apply overflow-y-auto overflow-x-hidden;
    overscroll-behavior: contain;
  }
  
  /* Responsive flex utilities */
  .flex-safe {
    @apply flex flex-wrap;
  }
  
  /* Ensure images don't overflow */
  img {
    @apply max-w-full h-auto;
  }
  
  /* Area-specific futuristic backgrounds */
  .bg-default-area {
    background-image: url('/assets/generated/default-bg.dim_1920x1080.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    position: relative;
  }
  
  .bg-default-area::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
      oklch(0.15 0.02 270 / 0.95) 0%, 
      oklch(0.12 0.03 270 / 0.92) 50%, 
      oklch(0.15 0.02 270 / 0.95) 100%);
    z-index: -1;
    pointer-events: none;
  }
  
  .bg-admin-area {
    background-image: url('/assets/generated/admin-bg.dim_1920x1080.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    position: relative;
  }
  
  .bg-admin-area::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
      oklch(0.12 0.03 250 / 0.96) 0%, 
      oklch(0.10 0.04 260 / 0.94) 50%, 
      oklch(0.12 0.03 250 / 0.96) 100%);
    z-index: -1;
    pointer-events: none;
  }
  
  .bg-finance-area {
    background-image: url('/assets/generated/finance-bg.dim_1920x1080.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    position: relative;
  }
  
  .bg-finance-area::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
      oklch(0.13 0.03 180 / 0.95) 0%, 
      oklch(0.11 0.04 190 / 0.93) 50%, 
      oklch(0.13 0.03 180 / 0.95) 100%);
    z-index: -1;
    pointer-events: none;
  }
  
  .bg-commerce-area {
    background-image: url('/assets/generated/commerce-bg.dim_1920x1080.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    position: relative;
  }
  
  .bg-commerce-area::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
      oklch(0.14 0.03 330 / 0.95) 0%, 
      oklch(0.11 0.04 340 / 0.93) 50%, 
      oklch(0.14 0.03 330 / 0.95) 100%);
    z-index: -1;
    pointer-events: none;
  }
  
  .bg-chat-area {
    background-image: url('/assets/generated/chat-bg.dim_1920x1080.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    position: relative;
  }
  
  .bg-chat-area::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
      oklch(0.13 0.03 290 / 0.95) 0%, 
      oklch(0.11 0.04 300 / 0.93) 50%, 
      oklch(0.13 0.03 290 / 0.95) 100%);
    z-index: -1;
    pointer-events: none;
  }
}

/* Animation keyframes */
@keyframes holographic-pulse {
  0%, 100% {
    opacity: 1;
    filter: brightness(1);
  }
  50% {
    opacity: 0.8;
    filter: brightness(1.2);
  }
}

.animate-holographic {
  animation: holographic-pulse 3s ease-in-out infinite;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: oklch(0.18 0.02 270);
}

::-webkit-scrollbar-thumb {
  background: oklch(0.35 0.05 270);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: oklch(0.45 0.08 270);
}

/* Mobile-first responsive utilities */
@media (max-width: 640px) {
  .container {
    @apply px-3;
  }
  
  /* Ensure mobile menu doesn't cause horizontal scroll */
  nav {
    @apply max-w-full overflow-x-hidden;
  }
}

/* Tablet adjustments */
@media (min-width: 641px) and (max-width: 1024px) {
  .container {
    @apply px-4;
  }
}

/* Desktop optimizations */
@media (min-width: 1025px) {
  .container {
    @apply px-6;
  }
}
